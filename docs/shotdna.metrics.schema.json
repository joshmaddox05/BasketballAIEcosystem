{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ShotDNA Metrics Schema",
  "description": "Schema for basketball shot analysis metrics generated by AI models",
  "type": "object",
  "required": [
    "release_ms",
    "elbow_angle_deg",
    "wrist_flick_deg_s",
    "arc_proxy_deg",
    "consistency_score",
    "tips",
    "model_version"
  ],
  "properties": {
    "release_ms": {
      "type": "number",
      "description": "Time from start of shot motion to ball release in milliseconds",
      "minimum": 100,
      "maximum": 2000,
      "examples": [540, 650, 720]
    },
    "elbow_angle_deg": {
      "type": "number",
      "description": "Elbow angle at release point in degrees",
      "minimum": 0,
      "maximum": 180,
      "examples": [97.2, 95.5, 98.1]
    },
    "wrist_flick_deg_s": {
      "type": "number",
      "description": "Wrist flick velocity in degrees per second",
      "minimum": 0,
      "maximum": 1000,
      "examples": [480.5, 520.3, 450.8]
    },
    "arc_proxy_deg": {
      "type": "number",
      "description": "Shooting arc angle in degrees (proxy measurement)",
      "minimum": 0,
      "maximum": 90,
      "examples": [44.0, 42.5, 46.2]
    },
    "consistency_score": {
      "type": "number",
      "description": "Overall consistency score from 0.0 to 1.0",
      "minimum": 0.0,
      "maximum": 1.0,
      "examples": [0.76, 0.82, 0.68]
    },
    "form_score": {
      "type": "number",
      "description": "Form technique score from 0.0 to 1.0",
      "minimum": 0.0,
      "maximum": 1.0,
      "examples": [0.85, 0.78, 0.92]
    },
    "timing_score": {
      "type": "number",
      "description": "Timing and rhythm score from 0.0 to 1.0",
      "minimum": 0.0,
      "maximum": 1.0,
      "examples": [0.72, 0.88, 0.65]
    },
    "overall_score": {
      "type": "number",
      "description": "Overall shot quality score from 0.0 to 1.0",
      "minimum": 0.0,
      "maximum": 1.0,
      "examples": [0.78, 0.85, 0.71]
    },
    "tips": {
      "type": "array",
      "description": "AI-generated improvement suggestions",
      "items": {
        "type": "string",
        "minLength": 10,
        "maxLength": 200
      },
      "minItems": 1,
      "maxItems": 5,
      "examples": [
        [
          "Raise elbow to 95–100° range",
          "Earlier release by ~60–100 ms",
          "Hold follow-through for 300 ms"
        ]
      ]
    },
    "improvements": {
      "type": "array",
      "description": "Specific areas for improvement",
      "items": {
        "type": "string",
        "enum": [
          "elbow_angle",
          "release_timing",
          "wrist_flick",
          "shooting_arc",
          "follow_through",
          "balance",
          "rhythm"
        ]
      },
      "minItems": 0,
      "maxItems": 7,
      "examples": [
        ["elbow_angle", "release_timing", "follow_through"]
      ]
    },
    "keypoints": {
      "type": "array",
      "description": "Detected body keypoints during shot",
      "items": {
        "type": "object",
        "required": ["frame", "timestamp", "joints"],
        "properties": {
          "frame": {
            "type": "integer",
            "minimum": 0,
            "description": "Frame number in video sequence"
          },
          "timestamp": {
            "type": "number",
            "minimum": 0,
            "description": "Timestamp in milliseconds"
          },
          "joints": {
            "type": "object",
            "description": "Detected joint positions and confidence scores",
            "patternProperties": {
              "^[a-z_]+$": {
                "type": "object",
                "required": ["x", "y", "confidence"],
                "properties": {
                  "x": {
                    "type": "number",
                    "description": "X coordinate (normalized 0-1)"
                  },
                  "y": {
                    "type": "number",
                    "description": "Y coordinate (normalized 0-1)"
                  },
                  "confidence": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0,
                    "description": "Detection confidence score"
                  }
                }
              }
            }
          }
        }
      }
    },
    "trajectory": {
      "type": "object",
      "description": "Ball trajectory analysis",
      "properties": {
        "points": {
          "type": "array",
          "description": "Trajectory points",
          "items": {
            "type": "object",
            "required": ["x", "y", "timestamp"],
            "properties": {
              "x": {
                "type": "number",
                "description": "X coordinate in pixels"
              },
              "y": {
                "type": "number",
                "description": "Y coordinate in pixels"
              },
              "timestamp": {
                "type": "number",
                "description": "Timestamp in milliseconds"
              }
            }
          }
        },
        "peak_height": {
          "type": "number",
          "description": "Peak height of trajectory in pixels",
          "minimum": 0
        },
        "release_angle": {
          "type": "number",
          "description": "Release angle in degrees",
          "minimum": 0,
          "maximum": 90
        },
        "entry_angle": {
          "type": "number",
          "description": "Entry angle at rim in degrees",
          "minimum": 0,
          "maximum": 90
        }
      }
    },
    "model_version": {
      "type": "string",
      "description": "Version of the AI model used for analysis",
      "pattern": "^[a-z0-9.-]+$",
      "examples": ["tflite-v0.1.0", "mediapipe-v1.0.0", "baseline-v0.2.1"]
    },
    "analysis_metadata": {
      "type": "object",
      "description": "Additional metadata about the analysis",
      "properties": {
        "processing_time_ms": {
          "type": "number",
          "description": "Time taken to process the video in milliseconds",
          "minimum": 0
        },
        "video_fps": {
          "type": "number",
          "description": "Frames per second of the input video",
          "minimum": 1,
          "maximum": 120
        },
        "video_duration_ms": {
          "type": "number",
          "description": "Duration of the analyzed video in milliseconds",
          "minimum": 0
        },
        "detection_confidence": {
          "type": "number",
          "description": "Overall confidence in the analysis",
          "minimum": 0.0,
          "maximum": 1.0
        },
        "shot_type": {
          "type": "string",
          "enum": ["free_throw", "mid_range", "three_pointer", "layup", "unknown"],
          "description": "Detected type of shot"
        },
        "result": {
          "type": "string",
          "enum": ["make", "miss", "unknown"],
          "description": "Detected shot result"
        }
      }
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "release_ms": 540,
      "elbow_angle_deg": 97.2,
      "wrist_flick_deg_s": 480.5,
      "arc_proxy_deg": 44.0,
      "consistency_score": 0.76,
      "form_score": 0.85,
      "timing_score": 0.72,
      "overall_score": 0.78,
      "tips": [
        "Raise elbow to 95–100° range",
        "Earlier release by ~60–100 ms",
        "Hold follow-through for 300 ms"
      ],
      "improvements": ["elbow_angle", "release_timing"],
      "model_version": "tflite-v0.1.0",
      "analysis_metadata": {
        "processing_time_ms": 1250,
        "video_fps": 30,
        "video_duration_ms": 2000,
        "detection_confidence": 0.92,
        "shot_type": "three_pointer",
        "result": "make"
      }
    }
  ]
}
